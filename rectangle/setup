#!/bin/bash
set -e

REPO_DIR="${REPO_DIR:-$(cd "$(dirname "$0")/.." && pwd)}"

# Source platform detection helpers
source "$REPO_DIR/lib/platform.sh"

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Rectangle Setup"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

OS=$(detect_os)

if [[ "$OS" != "macos" ]]; then
    echo "â„¹ï¸  Rectangle is macOS only, skipping"
    echo ""
    exit 0
fi

# Install Rectangle
if ! brew list --cask rectangle &> /dev/null; then
    echo "ğŸ“¦ Installing Rectangle..."
    brew install --cask rectangle
    echo "âœ“ Rectangle installed successfully"
else
    echo "âœ“ Rectangle already installed"
fi

echo ""

echo "ğŸ“ To configure Rectangle:"
echo "   1. Open Rectangle"
echo "   2. Go to Settings â†’ Import/Export"
echo "   3. Import: $REPO_DIR/rectangle/RectangleConfig.json"
echo ""
echo "âœ“ Rectangle setup complete!"
echo ""
