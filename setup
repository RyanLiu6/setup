#!/bin/bash
set -e

# Determine the setup directory
SETUP_DIR="${SETUP_DIR:-$HOME/dev/setup}"

echo "======================================"
echo "Development Environment Setup"
echo "======================================"
echo ""

# Install Brew
if ! command -v brew &> /dev/null; then
    echo "ðŸ“¦ Installing Homebrew..."
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    eval "$(/opt/homebrew/bin/brew shellenv)"
    echo "âœ“ Homebrew installed successfully"
else
    echo "âœ“ Homebrew already installed"
    eval "$(/opt/homebrew/bin/brew shellenv)"
fi

echo ""

# Run setup scripts for each component
"$SETUP_DIR/terminal/setup"
"$SETUP_DIR/direnv/setup"
"$SETUP_DIR/git/setup"
"$SETUP_DIR/shell/setup"

echo ""
echo "======================================"
echo "âœ“ Setup complete!"
echo "======================================"
echo ""
echo "Please restart your terminal or run: source ~/.zshrc"
echo ""
