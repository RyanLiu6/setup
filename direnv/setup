#!/bin/bash
set -e

SETUP_DIR="${SETUP_DIR:-$HOME/dev/setup}"

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Direnv Setup"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# Check for macOS
if [[ $(uname) != "Darwin" ]]; then
    echo "âš ï¸  Not on macOS - this setup is designed for macOS only"
    exit 1
fi

# Install direnv
if ! command -v direnv &> /dev/null; then
    echo "ğŸ“¦ Installing direnv..."
    brew install direnv
    echo "âœ“ direnv installed successfully"
else
    echo "âœ“ direnv already installed"
fi

echo ""

# Create config directory
echo "ğŸ“ Configuring direnv..."
mkdir -p ~/.config/direnv

# Copy direnv config
cp "$SETUP_DIR/direnv/direnvrc" ~/.config/direnv/direnvrc
echo "âœ“ Configuration copied to ~/.config/direnv/direnvrc"

echo ""
echo "âœ“ direnv setup complete!"
echo ""
